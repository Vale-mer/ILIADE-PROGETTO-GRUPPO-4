<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendario TFA GUBBIO-MARSCIANO</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2; /* Colore grigio chiaro */
      margin: 20px;
    }

    h2 {
      text-align: center;
      color: #333;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #f5f5f5; /* Colore sfondo testata */
    }

    select {
      width: 100%;
      box-sizing: border-box;
      padding: 8px;
      margin: 0;
    }

    .yellow {
      background-color: #ffff99; /* giallo */
    }

    .red {
      background-color: #ff9999; /* rosso */
    }

    .blue {
      background-color: #99ccff; /* azzurro */
    }

    .green {
      background-color: #99ff99; /* verde */
    }

    .orange {
      background-color: #ffcc99; /* arancione */
    }
  </style>
</head>
<body>

<h2>Calendario TFA GUBBIO-MARSCIANO</h2>

<table>
  <thead>
    <tr>
      <th>Data</th>
      <th>Orario di Inizio 1</th>
      <th>Orario di Fine 1</th>
      <th>Materia 1</th>
      <th>Orario di Inizio 2</th>
      <th>Orario di Fine 2</th>
      <th>Materia 2</th>
      <th>Esame</th>
    </tr>
  </thead>
  <tbody id="calendarioBody">
    <!-- Il contenuto del calendario verrà inserito qui tramite JavaScript -->
  </tbody>
</table>

<script>
  // Funzione per ottenere la data di oggi
  function getToday() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    return today;
  }

  // Funzione per salvare la selezione nell'oggetto localStorage
  function salvaSelezione() {
    const selezione = {
      orarioInizio1: document.getElementById("orarioInizio1").value,
      orarioFine1: document.getElementById("orarioFine1").value,
      materia1: document.getElementById("materia1").value,
      orarioInizio2: document.getElementById("orarioInizio2").value,
      orarioFine2: document.getElementById("orarioFine2").value,
      materia2: document.getElementById("materia2").value,
      esame: document.getElementById("esame").value
    };

    localStorage.setItem("selezione", JSON.stringify(selezione));
  }

  // Funzione per caricare la selezione salvata da localStorage
  function caricaSelezioneSalvata() {
    const selezioneSalvata = localStorage.getItem("selezione");

    if (selezioneSalvata) {
      const selezione = JSON.parse(selezioneSalvata);

      document.getElementById("orarioInizio1").value = selezione.orarioInizio1;
      document.getElementById("orarioFine1").value = selezione.orarioFine1;
      document.getElementById("materia1").value = selezione.materia1;
      document.getElementById("orarioInizio2").value = selezione.orarioInizio2;
      document.getElementById("orarioFine2").value = selezione.orarioFine2;
      document.getElementById("materia2").value = selezione.materia2;
      document.getElementById("esame").value = selezione.esame;
    }
  }

  // Funzione per generare il calendario
  function generateCalendar() {
    const today = getToday();
    const endDate = new Date('2024-05-18'); // Imposta la data di fine a maggio 2024

    const tableBody = document.getElementById('calendarioBody');

    // Materie disponibili
    const materie = [
      '',
      'Psicologia dello Sviluppo (Raspa)',
      'Neuropsichiatria infantile (Gallai)',
      'Legislazione (Coccia)',
      'Legislazione (Belardinelli)',
      'Laboratorio',
      'Progettazione del PDF e del PEI (Sannipoli)',
      'Modelli integrati (Pierini)',
      'TIC (Pattoia)',
      'Tirocinio',
      'Didattica speciale (Marsili)',
      'Pedagogia della relazione di aiuto (Bartolini)',
      'Pedagogia e didattica speciale (Morganti)',
      'Pedagogia speciale della gestione integrata (Signorelli)'
    ];

    // Orari disponibili
    const orariInizio = ['Seleziona Orario', '08:30', '14:30'];
    const orariFine = ['Seleziona Orario', '19:30', '13:30', '16:30', '19:00', '18:30'];
    const giorniSettimana = ['Dom', 'Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab'];

    // Ciclo fino alla data di fine
    for (let date = today; date <= endDate; date.setDate(date.getDate() + 1)) {
      const dayOfWeek = date.getDay();

      // Controlla se il giorno è lunedì, venerdì o sabato
      if (dayOfWeek === 1 || dayOfWeek === 5 || dayOfWeek === 6) {
        const row = tableBody.insertRow();
        const cellDate = row.insertCell(0);
        const cellStartTime1 = row.insertCell(1);
        const cellEndTime1 = row.insertCell(2);
        const cellMateria1 = row.insertCell(3);
        const cellStartTime2 = row.insertCell(4);
        const cellEndTime2 = row.insertCell(5);
        const cellMateria2 = row.insertCell(6);
        const cellEsame = row.insertCell(7);

        // Inserisci le tendine per la scelta di data, orario di inizio, orario di fine, materia ed esame
        cellDate.innerHTML = `${giorniSettimana[dayOfWeek]} ${date.toLocaleDateString('it-IT')}`;
        cellStartTime1.innerHTML = `<select id="orarioInizio1" class="red" onchange="salvaSelezione()">${orariInizio.map(orario => `<option>${orario}</option>`).join('')}</select>`;
        cellEndTime1.innerHTML = `<select id="orarioFine1" class="red" onchange="salvaSelezione()">${orariFine.map(orario => `<option>${orario}</option>`).join('')}</select>`;
        cellMateria1.innerHTML = `<select id="materia1" class="blue" onchange="salvaSelezione()">${materie.map(materia => `<option>${materia}</option>`).join('')}</select>`;
        cellStartTime2.innerHTML = `<select id="orarioInizio2" class="green" onchange="salvaSelezione()">${orariInizio.map(orario => `<option>${orario}</option>`).join('')}</select>`;
        cellEndTime2.innerHTML = `<select id="orarioFine2" class="green" onchange="salvaSelezione()">${orariFine.map(orario => `<option>${orario}</option>`).join('')}</select>`;
        cellMateria2.innerHTML = `<select id="materia2" class="orange" onchange="salvaSelezione()">${materie.map(materia => `<option>${materia}</option>`).join('')}</select>`;
        cellEsame.innerHTML = `<select id="esame" class="yellow" onchange="salvaSelezione()">${materie.map(materia => `<option>${materia}</option>`).join('')}</select>`;
      }
    }

    // Carica la selezione salvata
    caricaSelezioneSalvata();
  }

  // Chiama la funzione per generare il calendario
  generateCalendar();
</script>

</body>
</html>
